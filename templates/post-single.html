{% extends "base.html" %}

{% load static %}

{% block contenido %}


<section class="page-top-section set-bg" data-setbg="{% static 'img/page-top-bg/3.jpg' %}">
	<div class="page-info">
		<h2>Noticia</h2>
		<div class="site-breadcrumb">
			<a href="">Inicio</a> /
			<span>Blog</span>
		</div>
	</div>
</section>

<!-- News detail section -->
<section class="blog-page" style="padding:40px 0;">
	<div class="container">
		<div class="row">
			<div class="col-xl-9 col-lg-8 col-md-7">
				<div class="big-blog-item">
					<img src="{% if post.image %}{{ post.image.url }}{% else %}{% static 'img/games/no-image.svg' %}{% endif %}" alt="#" class="blog-thumbnail" style="width:100%;height:420px;object-fit:cover;">
					<div class="blog-content text-box text-dark" style="background:transparent; padding:20px;">
						<div class="top-meta">{% if post.created_at %}{{ post.created_at|date:"d.m.Y" }}{% endif %} / por <strong>{% if post.author %}<a href="{% url 'user_profile' post.author.username %}">{{ post.author.get_full_name|default:post.author.username }}</a>{% else %}Anónimo{% endif %}</strong>{% if post.category %} / in <a href="#">{{ post.category }}</a>{% endif %}</div>
						<h2 class="gs-title" style="color: white;">{% if post.title %}{{ post.title }}{% else %}Noticia{% endif %}</h2>
						{{ post.content|linebreaksbr }}
					</div>
				</div>

				<div class="mt-4">
					<h4>Dejar un comentario</h4>
					<form method="post">
						{% csrf_token %}
						<div class="form-group">
							{{ form.name }}
						</div>
						<div class="form-group">
							{{ form.content }}
						</div>
						<button type="submit" class="site-btn">Enviar comentario <img src="{% static 'img/icons/double-arrow.png' %}" alt="#" /></button>
					</form>
				</div>

				<div class="mt-5" style="background: rgba(0,0,0,0.55); padding:20px; border-radius:8px; color: white;">
					<h2 class="widget-title" style="color: white;">Comentarios</h2>
					{% if comments %}
						{% for comment in comments %}
							<div class="comment-item" style="padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.06);">
								<div class="comment-meta">{{ comment.created_at|date:"d.m.Y H:i" }} / <strong>{{ comment.name|default:'Anónimo' }}</strong></div>
								<p style="color: rgb(190, 0, 190)">{{ comment.content }}</p>
							</div>
						
							{% endfor %}
					{% else %}
						<p>No hay comentarios aún. Sé el primero en comentar.</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</section>

{% endblock %}